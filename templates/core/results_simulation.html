<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" >
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <title>Resultados</title>
    <script>

      endpoint = "/api/results/{{ id }}"

      $.ajax({
        method: "GET",
        url: endpoint,
        success: function(data) {
          plot(data);
        },
        error: function(error_data) {
          console.log(error_data);
        }
      })

      function plot(data) {

        const ctx = document.getElementById('plot_area');
        const configs = {
          elements: {
            point:{
              radius: 0
            }
          },
          plugins: {
            title: {
              display: true,
              text: 'Temperaturas ao longo de X'
            },
          },
          scales: {
            x: {
              display: true,
              title: {
                display: true,
                text: 'x(m)'
              }
            },
            y: {
              display: true,
              title: {
                display: true,
                text: 'Â°C'
              },
              beginAtZero: true
            },
          }
        }

        const graph_data = {
            labels: data.mesh,
            datasets: data.steps.map(element => {
                return {
                  label: `Tempo ${element.t} s`,
                  data: element.u,
                  borderWidth: 1
                }
            })
          }
        new Chart(ctx, {
          type: 'line',
          data: graph_data,
          options:configs,
        });
      }
    </script>
    </head>
    <body>
      <div class="container text-center">
        <div  class="row">
          <canvas id="plot_area"></canvas>
        </div>
        <div  class="row">
          <a class="btn btn-secondary" href="{% url 'core:list_simulation' %}"> Voltar </a>
        </div>
      </div>
    </body>
</html>
